package controller;


import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.*;

import java.util.ArrayList;

@Controller
@RequestMapping("/resume")
public class XMLController {

    static Listecv CV=new Listecv();

    public  XMLController(){
            initialise();
    }

    public static void initialise()
    {
        CV = new Listecv();
        String titre = "CV1 GIL";
        String titre1 = "CV2 GIL";

        information_perso perso = new information_perso("idrissou","amzath","29A stanislas girardin","25456415");

         information_perso perso1 = new information_perso("akim","jean","32A stanislas girardin","0605252556");

        competence comp1 = new competence("reseau","maintenance");
        competence comp2 = new competence("reseau","programmation");
        ArrayList<competence> competences = new ArrayList<competence>();
        ArrayList<competence> competencess = new ArrayList<competence>();
        competences.add(comp1);
        competencess.add(comp2);

        experience_pro pro1 = new experience_pro("18/02/2014","maintenace");
        experience_pro pro2 = new experience_pro("25/10/2014","cablage");
        ArrayList<experience_pro> experiences_pro = new  ArrayList<experience_pro>();
        ArrayList<experience_pro> experiences_pros = new  ArrayList<experience_pro>();

        experiences_pro.add(pro1);
        experiences_pros.add(pro2);

        langue l1 = new langue("anglais");
        langue l2 = new langue("allemand");
        ArrayList<langue> langues = new ArrayList<langue>();
        langues.add(l1);
        langues.add(l2);

        //creation d'un cv
        Curriculum cv = new Curriculum(titre, perso, experiences_pro, competences, langues);
        Curriculum cv1 = new Curriculum(titre1, perso1, experiences_pros, competencess, langues);
        CV.add(cv);
        CV.add(cv1);
    }
    
//METHODE GET POUR AVOIR UN CV GRACE Ã€ SON ID

    @RequestMapping(value="{id}", method = RequestMethod.GET)
    public @ResponseBody
    Curriculum getCVInXML(@PathVariable int id) {

        return this.CV.getCvList().get(id);
    }
//METHODE GET POUR AVOIR LA LISTE DES CV
    @RequestMapping(value="", method = RequestMethod.GET)
    public @ResponseBody Listecv getCvsInXML() {
        return CV;
    }
    
//methode POST
    @RequestMapping(value="add", method = RequestMethod.POST)
    public @ResponseBody void addCVWithPost(@RequestBody Curriculum curriculumVitae) {
        CV.add(curriculumVitae);
    }
}
